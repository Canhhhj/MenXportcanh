<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gậy bóng chày hợp kim sắt - bạc | MENXPORT</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../../CSS/giao-dien-chinh.css">
</head>
<body class="detail-page">
    <div class="utility-strip">
        <div class="container util-wrapper">
            <div class="util-left">
                <span><i class="fa-solid fa-envelope"></i> menxportvietnam@gmail.com</span>
                <span><i class="fa-solid fa-phone"></i> 0878 153 630</span>
                <span><i class="fa-solid fa-location-dot"></i> Số 31, Ngõ 521, Phạm Văn Đồng, Hà Nội</span>
            </div>
            <div class="util-right">
                <span><i class="fa-solid fa-shield-heart"></i> Bảo hành chính hãng</span>
                <span><i class="fa-solid fa-truck-fast"></i> Miễn phí vận chuyển toàn quốc</span>
            </div>
        </div>
    </div>

    <header class="site-header">
        <div class="container header-main">
            <div class="logo">
                <a href="../trang-chu.html">
                    <img src="../../taiNguyen/img/logo/logomenxport.png" alt="MENXPORT">
                </a>
            </div>
            <nav class="main-nav">
                <a href="../trang-chu.html">Trang chủ</a>
                <a href="../ve-chung-toi.html">Giới thiệu</a>
                <a href="../san-pham.html" class="active">Sản phẩm</a>
                <a href="../tin-tuc.html">Tin tức</a>
                <a href="../lien-he.html">Liên hệ</a>
            </nav>
            <div class="header-actions">
                <div class="search-field">
                    <input type="text" placeholder="Tìm kiếm sản phẩm">
                    <button><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>
                <a href="#"><i class="fa-regular fa-user"></i></a>
                <a href="../gio-hang.html" class="cart-link">
                    <i class="fa-solid fa-bag-shopping"></i>
                    <span id="cart-count">0</span>
                </a>
            </div>
        </div>
    </header>

    <main>
        <section class="page-hero container">
            <div>
                <p class="eyebrow">MENXPORT DETAIL</p>
                <h1>Gậy bóng chày hợp kim sắt - bạc</h1>
                <div class="breadcrumb">
                    <a href="../trang-chu.html">Trang chủ</a>
                    <span>/</span>
                    <a href="../san-pham.html">Sản phẩm</a>
                    <span>/</span>
                    <span>Gậy bóng chày hợp kim sắt - bạc</span>
                </div>
            </div>
        </section>

        <section class="product-detail-layout container">
            <div class="product-images">
                <img id="main-image" src="../../taiNguyen/img/sanpham/sp18.Gậy bóng chày/image.png" alt="Gậy bóng chày hợp kim sắt - bạc">
                <div class="thumbnail-row">
                    <img src="../../taiNguyen/img/sanpham/sp18.Gậy bóng chày/image.png" alt="Hình 1" onclick="changeImage(this.src)">
                    <img src="../../taiNguyen/img/sanpham/sp18.Gậy bóng chày/image copy.png" alt="Hình 2" onclick="changeImage(this.src)">
                    <img src="../../taiNguyen/img/sanpham/sp18.Gậy bóng chày/image copy 2.png" alt="Hình 3" onclick="changeImage(this.src)">
                    <img src="../../taiNguyen/img/sanpham/sp18.Gậy bóng chày/image copy 3.png" alt="Hình 4" onclick="changeImage(this.src)">
                    <img src="../../taiNguyen/img/sanpham/sp18.Gậy bóng chày/image copy 4.png" alt="Hình 5" onclick="changeImage(this.src)">
                </div>
            </div>
            <div class="product-info">
                <p class="product-brand">MENXPORT</p>
                <h1>Gậy bóng chày hợp kim sắt - bạc</h1>
                <div class="price-section">
                    <span class="current-price">290.000₫</span>
                </div>
                <p>Gậy bóng chày hợp kim sắt màu bạc, phù hợp tập phản xạ, tự vệ và luyện thể lực tại nhà.</p>
                <ul class="feature-list">
                    <li><i class="fa-solid fa-check"></i> Chất liệu hợp kim sắt chắc chắn, bền bỉ.</li>
                    <li><i class="fa-solid fa-check"></i> Tay cầm bọc êm, bám tay, hạn chế trơn trượt.</li>
                    <li><i class="fa-solid fa-check"></i> Kích thước phù hợp người trưởng thành, dễ sử dụng.</li>
                </ul>

                <div class="variant-selector" data-variant-key="gay-bong-chay-sp023"></div>

                <div class="quantity-add-section">
                    <div class="quantity-control">
                        <button type="button" class="qty-btn" onclick="decreaseQty()">-</button>
                        <span id="quantity-value">1</span>
                        <button type="button" class="qty-btn" onclick="increaseQty()">+</button>
                    </div>
                    <div class="product-actions">
                        <button class="btn btn-primary btn-add-to-cart" 
                                id="add-to-cart-btn"
                                data-id=""
                                data-ten=""
                                data-gia=""
                                data-hinh="">Thêm vào giỏ</button>
                        <button class="btn btn-secondary btn-buy-now" 
                                id="buy-now-btn"
                                data-id=""
                                data-ten=""
                                data-gia=""
                                data-hinh="">Mua ngay</button>
                    </div>
                </div>

                <div class="assurance-list">
                    <span><i class="fa-solid fa-shield"></i> Bảo hành chính hãng 24 tháng</span>
                    <span><i class="fa-solid fa-truck-fast"></i> Giao nhanh 2H nội thành</span>
                    <span><i class="fa-solid fa-rotate"></i> Đổi trả trong 30 ngày</span>
                </div>
            </div>
        </section>

        <section class="product-tabs container">
            <div class="tabs-header">
                <button class="tab-button active" onclick="showTab('description')">Mô tả chi tiết</button>
                <button class="tab-button" onclick="showTab('specs')">Thông số kỹ thuật</button>
                <button class="tab-button" onclick="showTab('policy')">Chính sách</button>
            </div>
            <div class="tab-pane active" id="description-tab" style="display:block;">
                <h3>Giới thiệu sản phẩm</h3>
                <p>Gậy bóng chày hợp kim sắt là lựa chọn phù hợp cho người muốn luyện tập phản xạ, thể lực hoặc sử dụng trong các bài tập tự vệ cơ bản.</p>

                <h3>Các biến thể & bảng giá</h3>
                <ul>
                    <li>SP023 - Gậy bóng chày hợp kim sắt - bạc – 290.000₫ (giá sỉ 53.000₫, tồn kho 170)</li>
                    <li>SP023 - Gậy bóng chày hợp kim sắt - đỏ – 290.000₫ (giá sỉ 53.000₫, tồn kho 500)</li>
                    <li>SP023 - túi đựng gậy bóng chày – 90.000₫ (giá sỉ 5.000₫, tồn kho 8)</li>
                    <li>SP023 - Gậy bóng chày hợp kim sắt - đen – 290.000₫ (giá sỉ 53.000₫, tồn kho 500)</li>
                </ul>

                <h3>Ứng dụng</h3>
                <ul>
                    <li>Tập phản xạ, phối hợp tay – mắt.</li>
                    <li>Tập các bài self-defense cơ bản.</li>
                    <li>Dùng cho hoạt động thể thao ngoài trời.</li>
                </ul>
            </div>
            <div class="tab-pane" id="specs-tab" style="display:none;">
                <table class="specs-table">
                    <!-- Thêm thông số kỹ thuật tại đây -->
                </table>
            </div>
            <div class="tab-pane" id="policy-tab" style="display:none;">
                <ul>
                    <li><i class="fa-solid fa-truck"></i> <strong>Miễn phí vận chuyển:</strong> Đơn hàng từ 2.000.000₫</li>
                    <li><i class="fa-solid fa-tools"></i> <strong>Lắp đặt:</strong> Miễn phí lắp đặt tận nơi trong vòng 24h tại Hà Nội</li>
                    <li><i class="fa-solid fa-shield"></i> <strong>Bảo hành:</strong> Bảo hành chính hãng 24 tháng</li>
                    <li><i class="fa-solid fa-rotate"></i> <strong>Đổi trả:</strong> Đổi trả miễn phí trong 30 ngày nếu sản phẩm có lỗi</li>
                </ul>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container footer-grid">
            <div>
                <img src="../../taiNguyen/img/logo/logomenxport.png" alt="Menxport">
                <p>Power Departure. Chuyên gia cung cấp dụng cụ thể thao chất lượng cao với thương hiệu MenXport đặc trưng.</p>
                <div class="socials">
                    <a href="https://www.facebook.com/share/17iakPF9Md/?mibextid=wwXIfr" target="_blank" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://www.youtube.com/@MenXportVietNam" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="https://www.tiktok.com/@menxnportvietnam?_r=1&_t=ZS-91ZUed3xJHm" target="_blank" title="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="tel:0878153630" title="Zalo"><i class="fab fa-zalo"></i></a>
                </div>
            </div>
            <div>
                <h4>Danh mục</h4>
                <ul>
                    <li><a href="../san-pham.html?category=combo">Combo thể thao</a></li>
                    <li><a href="../san-pham.html?category=ta-don">Tạ tay - Bánh tạ</a></li>
                    <li><a href="../san-pham.html?category=phu-kien">Phụ kiện Boxing</a></li>
                </ul>
            </div>
            <div>
                <h4>Hỗ trợ khách hàng</h4>
                <ul>
                    <li><a href="../chinh-sach-doi-tra.html">Chính sách đổi trả</a></li>
                    <li><a href="../chinh-sach-bao-mat.html">Chính sách bảo mật</a></li>
                    <li><a href="../dieu-kien-bao-hanh.html">Điều kiện bảo hành</a></li>
                    <li><a href="../phuong-thuc-thanh-toan.html">Phương thức thanh toán</a></li>
                </ul>
            </div>
            <div>
                <h4>Nhận ưu đãi sớm</h4>
                <p>Đăng ký để nhận lịch flash sale MenXport mỗi tuần.</p>
                <form class="subscribe-form">
                    <input type="email" placeholder="Email của bạn">
                    <button type="submit" class="btn btn-primary">Đăng ký</button>
                </form>
            </div>
        </div>
        <p class="copyright">© 2025 MENXPORT - POWER DEPARTURE.</p>
    </footer>

    <script src="../../JS/xu-ly-chung.js"></script>
    <script>
        // Khởi tạo biến global
        let quantity = 1;
        let variantState = null;
        let baseProductConfig = null;
        
        // Đợi DOM và script load xong
        function initProductPage() {
            // Đảm bảo các hàm từ xu-ly-chung.js đã sẵn sàng
            // Kiểm tra cả addToCart và window.addToCart
            if ((typeof addToCart !== 'function' && typeof window.addToCart !== 'function') || 
                (typeof buyNow !== 'function' && typeof window.buyNow !== 'function')) {
                
                setTimeout(initProductPage, 50);
                return;
            }
            
            // Khởi tạo trang
            quantity = 1;
            const priceElement = document.querySelector('.price-section .current-price');
            variantState = window.initVariantSelector ? window.initVariantSelector({
                key: 'gay-bong-chay-sp023',
            priceElement,
            defaultOptionId: 'gay-bong-chay-bac',
                onChange: function(variant) {
                    // Cập nhật lại data attributes khi variant thay đổi
                    updateButtonDataAttributes();
                }
            }) : null;
            baseProductConfig = {
                baseName: 'Gậy bóng chày hợp kim sắt',
            defaultName: 'Gậy bóng chày hợp kim sắt - bạc',
            id: 'gay-bong-chay-bac',
            price: 290000,
            image: '../../taiNguyen/img/sanpham/sp18.Gậy bóng chày/image.png'
        };
            
            // Cập nhật data attributes cho các nút
            updateButtonDataAttributes();
            
            // Thiết lập event listeners giống như trang chủ
            setupDetailPageListeners();
            
            if (typeof updateCartCount === 'function') updateCartCount();
        }
        
        // Cập nhật data attributes cho các nút dựa trên product config
        function updateButtonDataAttributes() {
            if (!baseProductConfig) return;
            
            // Lấy product payload hiện tại
            let product;
            if (typeof window.buildProductPayload === 'function' && variantState) {
                product = window.buildProductPayload(baseProductConfig, variantState, quantity);
            } else {
                product = {
                    id: baseProductConfig.id,
                    ten: baseProductConfig.defaultName || baseProductConfig.baseName,
                    gia: baseProductConfig.price,
                    gia_khuyen_mai: baseProductConfig.gia_khuyen_mai || baseProductConfig.price,
                    hinh: baseProductConfig.image,
                    soLuong: quantity
                };
            }
            
            const finalPrice = product.gia_khuyen_mai && product.gia_khuyen_mai < product.gia ? product.gia_khuyen_mai : product.gia;
            
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            const buyNowBtn = document.getElementById('buy-now-btn');
            
            if (addToCartBtn) {
                addToCartBtn.setAttribute('data-id', product.id);
                addToCartBtn.setAttribute('data-ten', product.ten);
                addToCartBtn.setAttribute('data-gia', finalPrice);
                addToCartBtn.setAttribute('data-hinh', product.hinh || '');
            }
            
            if (buyNowBtn) {
                buyNowBtn.setAttribute('data-id', product.id);
                buyNowBtn.setAttribute('data-ten', product.ten);
                buyNowBtn.setAttribute('data-gia', finalPrice);
                buyNowBtn.setAttribute('data-hinh', product.hinh || '');
            }
        }
        
        // Thiết lập event listeners giống như trang chủ
        function setupDetailPageListeners() {
            // Xử lý nút "Thêm vào giỏ"
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            if (addToCartBtn) {
                // Xóa listener cũ nếu có
                const newAddBtn = addToCartBtn.cloneNode(true);
                addToCartBtn.parentNode.replaceChild(newAddBtn, addToCartBtn);
                
                newAddBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    updateButtonDataAttributes(); // Cập nhật lại data attributes trước khi thêm
                    const productData = {
                        id: this.getAttribute('data-id'),
                        ten: this.getAttribute('data-ten'),
                        gia: parseInt(this.getAttribute('data-gia')) || 0,
                        hinh: this.getAttribute('data-hinh') || ''
                    };
                    if (!productData.id || !productData.ten) {
                        alert("Có lỗi xảy ra. Vui lòng thử lại!");
                        return;
                    }
                    // Gọi trực tiếp hàm addToCart từ xu-ly-chung.js (giống trang chủ)
                    if (typeof addToCart === 'function') {
                        addToCart(productData, quantity);
                    } else if (typeof window.addToCart === 'function') {
                        window.addToCart(productData, quantity);
                    }
                });
            }
            
            // Xử lý nút "Mua ngay"
            const buyNowBtn = document.getElementById('buy-now-btn');
            if (buyNowBtn) {
                // Xóa listener cũ nếu có
                const newBuyBtn = buyNowBtn.cloneNode(true);
                buyNowBtn.parentNode.replaceChild(newBuyBtn, buyNowBtn);
                
                newBuyBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    updateButtonDataAttributes(); // Cập nhật lại data attributes trước khi mua
                    const productData = {
                        id: this.getAttribute('data-id'),
                        ten: this.getAttribute('data-ten'),
                        gia: parseInt(this.getAttribute('data-gia')) || 0,
                        hinh: this.getAttribute('data-hinh') || ''
                    };
                    if (!productData.id || !productData.ten) {
                        alert("Có lỗi xảy ra. Vui lòng thử lại!");
                        return;
                    }
                    // Gọi hàm buyNow từ xu-ly-chung.js (giống trang chủ)
                    if (typeof buyNow === 'function') {
                        buyNow(productData, quantity);
                    } else if (typeof window.buyNow === 'function') {
                        window.buyNow(productData, quantity);
                    }
                });
            }
        }
        
        document.addEventListener('DOMContentLoaded', initProductPage);
        
        // Định nghĩa các hàm ở global scope để onclick có thể gọi
        function increaseQty() {
            quantity++;
            document.getElementById('quantity-value').textContent = quantity;
        }
        
        function decreaseQty() {
            if (quantity > 1) {
                quantity--;
                document.getElementById('quantity-value').textContent = quantity;
            }
        }
        
        function changeImage(src) {
            document.getElementById('main-image').src = src;
        }
        
        function showTab(tabName, event) {
            document.querySelectorAll('.tab-pane').forEach(pane => pane.style.display = 'none');
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName + '-tab').style.display = 'block';
            if (event && event.target) {
                event.target.classList.add('active');
            } else {
                document.querySelector('.tab-button[onclick*="' + tabName + '"]').classList.add('active');
            }
        }
        
        
    </script>
</body>
</html>

